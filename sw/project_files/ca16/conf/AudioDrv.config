/**
*  @file      AudioSrv.Config
*  @brief     Config data for audio server 
*  @project   iBT150 
*  @author    Johnny Fan
*  @date      15-Sep-2014
*  @copyright Tymphany Ltd.
*/

#include "AudioSrv.h"
#include "product.config"

/*****************************************************************
 * Config Data
 *****************************************************************/
/* the time (ms) per timeout signal */
#define AUDIO_SRV_TIMEOUT_IN_MS  10

/* measured in ms */
#define AUDIO_ACTIVE_LINE_IN_JACK_DEBOUNCE_TIME 1000
#define AUDIO_ACTIVE_LINE_IN_JACK_SCAN_TIME     10
#define AUDIO_ACTIVE_MUSIC_DETECT_TIME          2000
#define AUDIO_AMP_TEMP_CHECK_TIME               100
#define AUDIO_AMP_ERROR_CHECK_TIME              100
#define AUDIO_ACTIVE_FIRST_DET_AFTER_PLUGGED_TIME  1000
#define AUDIO_ACTIVE_MUTE_DEBOUNCE_TIME         0 // Note: As mute debounce logic has been implemented in ASE-TK, so no need mute debounce in MCU.
#define AUDIO_PRINT_PREIOD_IN_MS                5000

/* Pin usage */
#define  AMP_WAKEUP(x)           GpioDrv_SetBit(&(x),GPIO_OUT_AMP_SDZ) //SDZ: Active LOW
#define  AMP_SHUTDOWN(x)         GpioDrv_ClearBit(&(x),GPIO_OUT_AMP_SDZ)

#define  SYSPWR_ENABLE(x)        GpioDrv_SetBit(&(x),GPIO_OUT_SYSPWR_ON) //Active HIGH
#define  SYSPWR_DISABLE(x)       GpioDrv_ClearBit(&(x),GPIO_OUT_SYSPWR_ON)


#define TEMPERATURE_POSITIONS_NUM  ArraySize(audioNtcTempTable)

/* Temperature lookup table, To Do: Need to fine-tune after tempearture measurement
 * Formula:
 *
 * array index is "degree C"
 */
const uint16 audioNtcTempTable[] =
{
    3848,    3836,    3823,    3810,    3796,    3782,    3767,    3752,    3736,    3720, //0~9 degree C
    3703,    3685,    3667,    3649,    3629,    3610,    3589,    3568,    3546,    3524, //10~19 degree C
    3501,    3478,    3453,    3429,    3403,    3377,    3351,    3324,    3296,    3268, //20~29 degree C
    3239,    3209,    3179,    3149,    3118,    3086,    3054,    3021,    2988,    2955, //30~39 degree C
    2921,    2887,    2852,    2817,    2782,    2746,    2710,    2674,    2637,    2601, //40~49 degree C
    2564,    2527,    2490,    2453,    2415,    2378,    2341,    2303,    2266,    2229, //50~59 degree C
    2191,    2154,    2117,    2081,    2044,    2007,    1971,    1935,    1900,    1864, //60~69 degree C
    1829,    1794,    1760,    1725,    1692,    1658,    1625,    1592,    1560,    1528, //70~79 degree C
    1497,    1466,    1435,    1405,    1376,    1346,    1318,    1289,    1262,    1234, //80~89 degree C
    1207,    1181,    1155,    1130,    1105,    1080,    1056,    1033,    1010,     987, //90~99 degree C
     965,     943,     922,     901,     881,     861,     841,     822,     804,     785, //100~109 degree C
     767,     750,     733,     716,     700,     684,     668,     653,     638,     624, //110~119 degree C
     609,     595,     582,     569,     556,     543,     531,     519,     507,     496, //120~119 degree C
     485                                                                                   //130 degree C
                                                                                           //otherwise, 131 degree C
};


